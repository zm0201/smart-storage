<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Module Protect | Smart Storage</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/smart-storage/docs/favicon.ico">
    <link rel="stylesheet" href="/smart-storage/docs/global.css">
    <meta name="description" content="Smarter storage management">
    
    <link rel="preload" href="/smart-storage/docs/assets/css/0.styles.35315d82.css" as="style"><link rel="preload" href="/smart-storage/docs/assets/js/app.71b5e20c.js" as="script"><link rel="preload" href="/smart-storage/docs/assets/js/2.c4892136.js" as="script"><link rel="preload" href="/smart-storage/docs/assets/js/3.7ce944db.js" as="script"><link rel="prefetch" href="/smart-storage/docs/assets/js/10.16aeb432.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/11.da060373.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/12.9923a516.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/13.e7eb40d4.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/14.85045ce7.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/15.cb80a47f.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/16.1c19232b.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/17.eeae999c.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/18.cc82ecb8.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/19.7e321849.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/20.d99ae135.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/21.67fa931a.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/22.b176de84.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/23.3b0cb328.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/4.03f62c19.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/5.1a6e9de4.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/6.ceec3eb9.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/7.31ad944e.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/8.23ef3bab.js"><link rel="prefetch" href="/smart-storage/docs/assets/js/9.f8aede66.js">
    <link rel="stylesheet" href="/smart-storage/docs/assets/css/0.styles.35315d82.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/smart-storage/docs/" class="home-link router-link-active"><img src="/smart-storage/docs/logo.png" alt="Smart Storage" class="logo"> <span class="site-name can-hide">Smart Storage</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/smart-storage/docs/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/smart-storage/docs/api/" class="nav-link">
  API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Demos" class="dropdown-title"><span class="title">Demos</span> <span class="arrow down"></span></button> <button type="button" aria-label="Demos" class="mobile-dropdown-title"><span class="title">Demos</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://northwang-lucky.github.io/smart-storage/vue-demo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue 3 Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://northwang-lucky.github.io/smart-storage/react-demo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  React Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/smart-storage/docs/guide/advanced/module-protect.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/smart-storage/docs/zh/guide/advanced/module-protect.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/northwang-lucky/smart-storage" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/smart-storage/docs/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/smart-storage/docs/api/" class="nav-link">
  API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Demos" class="dropdown-title"><span class="title">Demos</span> <span class="arrow down"></span></button> <button type="button" aria-label="Demos" class="mobile-dropdown-title"><span class="title">Demos</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://northwang-lucky.github.io/smart-storage/vue-demo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue 3 Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://northwang-lucky.github.io/smart-storage/react-demo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  React Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/smart-storage/docs/guide/advanced/module-protect.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/smart-storage/docs/zh/guide/advanced/module-protect.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/northwang-lucky/smart-storage" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/smart-storage/docs/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/smart-storage/docs/guide/quick-start.html" class="sidebar-link">Quick Start</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/smart-storage/docs/guide/advanced/storage-helper.html" class="sidebar-link">Storage Helper</a></li><li><a href="/smart-storage/docs/guide/advanced/module-protect.html" aria-current="page" class="active sidebar-link">Module Protect</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/smart-storage/docs/guide/advanced/module-protect.html#let-s-take-a-look-at-this-case" class="sidebar-link">Let's Take a Look at This Case</a></li><li class="sidebar-sub-header"><a href="/smart-storage/docs/guide/advanced/module-protect.html#how-to-solve" class="sidebar-link">How to Solve?</a></li></ul></li><li><a href="/smart-storage/docs/guide/advanced/version-control.html" class="sidebar-link">Version Control</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="module-protect"><a href="#module-protect" class="header-anchor">#</a> Module Protect</h1> <h2 id="let-s-take-a-look-at-this-case"><a href="#let-s-take-a-look-at-this-case" class="header-anchor">#</a> Let's Take a Look at This Case</h2> <p>We have used the <code>createLocalStorage</code> API to create a storage module whose key content is &quot;unprotected_storage_key&quot;:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// storage.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createLocalStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@smart-storage/vue-hooks'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">UnprotectedStorage</span> <span class="token punctuation">{</span>
  str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  num<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> useStorage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createLocalStorage</span><span class="token generic class-name"><span class="token operator">&lt;</span>UnprotectedStorage<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  rootNodeKey<span class="token operator">:</span> <span class="token string">'unprotected_storage_key'</span><span class="token punctuation">,</span>
  initial<span class="token operator">:</span> <span class="token punctuation">{</span> str<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We can then see our storage module in chrome's developer tool:</p> <p><img src="/smart-storage/docs/assets/img/origin-storage.958d2e8a.jpg" alt="devtools-storage"></p> <p>And then, someone writes code that looks like this:</p> <div class="language-ts extra-class"><pre class="language-ts"><code>window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'unprotected_storage_key'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>So we all know that once this line of code is executed, the data structure of the storage module will be destroyed:</p> <p><img src="data:image/jpeg;base64,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" alt="foo-storage"></p> <p>And once the storage module is destroyed, Smart Storage will not work normally!!!</p> <h2 id="how-to-solve"><a href="#how-to-solve" class="header-anchor">#</a> How to Solve?</h2> <p>To prevent the data structure of the storage module from being corrupted, Smart Storage provides a configuration item that prevents the storage API from making the original call to the storage module key:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// storage.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createLocalStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@smart-storage/vue-hooks'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">ProtectedStorage</span> <span class="token punctuation">{</span>
  str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  num<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> useStorage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createLocalStorage</span><span class="token generic class-name"><span class="token operator">&lt;</span>ProtectedStorage<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  rootNodeKey<span class="token operator">:</span> <span class="token string">'protected_storage_key'</span><span class="token punctuation">,</span>
  protect<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Just need set it to true</span>
  initial<span class="token operator">:</span> <span class="token punctuation">{</span> str<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>After opening the module protection like this, the three functions <code>setItem()</code>, <code>removeItem()</code> and <code>clear()</code> will be overridden by <code>Proxy</code> (let's say we're using <code>localStorage</code>):</p> <ul><li><p>When calling <code>localStorage.setItem('protected_storage_key', 'foo')</code>, you will receive an error like this:</p> <p><img src="/smart-storage/docs/assets/img/set-item-error.f1d67b2c.png" alt="set-item-error"></p></li> <li><p>When calling <code>localStorage.removeItem('protected_storage_key')</code>, you will receive an error like this:</p> <p><img src="/smart-storage/docs/assets/img/remove-item-error.d6b7150d.png" alt="remove-item-error"></p></li> <li><p>When calling <code>localStorage.clear()</code>, <strong>&quot;protected_storage_key&quot; and its corresponding value will be kept</strong>, the others will be deleted.</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>setItem()</code>, <code>removeItem()</code> will only be blocked with an error if you try to change the key that belongs to a protected module (such as &quot;protected_storage_key&quot; above), and will work properly if you change other keys.</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/northwang-lucky/smart-storage/edit/main/docs/guide/advanced/module-protect.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/6/2023, 12:34:32 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/smart-storage/docs/guide/advanced/storage-helper.html" class="prev">
        Storage Helper
      </a></span> <span class="next"><a href="/smart-storage/docs/guide/advanced/version-control.html">
        Version Control
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/smart-storage/docs/assets/js/app.71b5e20c.js" defer></script><script src="/smart-storage/docs/assets/js/2.c4892136.js" defer></script><script src="/smart-storage/docs/assets/js/3.7ce944db.js" defer></script>
  </body>
</html>
